<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:insert="common/top :: head">
</head>
<head>
<body>
<div id="page-content">
    <div class="index-model-h">
        <div class="page-header">
            <div>
                <span>查询时间:</span>
                <input id="searchTime" name="searchTime" type="text" readonly="readonly" placeholder="查询时间"
                       onclick="laydate({istime: true, format: 'YYYY-MM-DD'})"/>
                <button id="query" class="btn btn-small btn-success" onclick="search()"><i class="icon-search"></i> 查询
                </button>
            </div>
        </div>
        <div class="page-header">商户信息：</div>
        <div class="row">
            <div class="index-model">
                <div class="pricing-span-index" style="width: 36%">
                    <div class="widget-box ">
                        <div class="widget-header header-color-red3">
                            <h5 class="bigger lighter">支付账户余额：</h5>
                        </div>
                        <div class="widget-body index-number">
                            <span id="balance">0</span>
                        </div>
                    </div>
                </div>
                <div class="pricing-span-index"  style="width: 36%">
                    <div class="widget-box ">
                        <div class="widget-header header-color-red3">
                            <h5 class="bigger lighter">商户余额：</h5>
                        </div>
                        <div class="widget-body index-number">
                            <span id="merchantBalance">0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="page-header">资金信息：</div>
        <div class="row">
            <div class="index-model">
                <div class="pricing-span-index">
                    <div class="widget-box ">
                        <div class="widget-header header-color-red3">
                            <h5 class="bigger lighter">当日借出笔数</h5>
                        </div>
                        <div class="widget-body index-number">
                            <span id="countLoanOrderNumberToDay">0</span>
                        </div>
                    </div>
                </div>
                <div class="pricing-span-index">
                    <div class="widget-box ">
                        <div class="widget-header header-color-red3">
                            <h5 class="bigger lighter">当日放款金额：</h5>
                        </div>
                        <div class="widget-body index-number">
                            <span id="countLoanAmountToDay">0</span>
                        </div>
                    </div>
                </div>
                <div class="pricing-span-index">
                    <div class="widget-box ">
                        <div class="widget-header header-color-red3">
                            <h5 class="bigger lighter">当日回款金额：</h5>
                        </div>
                        <div class="widget-body index-number">
                            <span id="countRepayAmountToDay">0</span>
                        </div>
                    </div>
                </div>
                <div class="pricing-span-index">
                    <div class="widget-box ">
                        <div class="widget-header header-color-red3">
                            <h5 class="bigger lighter">当日应收金额：</h5>
                        </div>
                        <div class="widget-body index-number">
                            <span id="countShouldRepayAmountToDay">0</span>
                        </div>
                    </div>
                </div>
                <div class="pricing-span-index">
                    <div class="widget-box ">
                        <div class="widget-header header-color-red3">
                            <h5 class="bigger lighter">当日应收本金：</h5>
                        </div>
                        <div class="widget-body index-number">
                            <span id="countBorrowMoneyToDay">0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="index-model">
                <div class="pricing-span-index">
                    <div class="widget-box ">
                        <div class="widget-header header-color-red3">
                            <h5 class="bigger lighter">累计借出笔数：</h5>
                        </div>
                        <div class="widget-body index-number">
                            <span id="countAllSuccessOrderNumber">0</span>
                        </div>
                    </div>
                </div>
                <div class="pricing-span-index">
                    <div class="widget-box ">
                        <div class="widget-header header-color-red3">
                            <h5 class="bigger lighter">累计放款金额：</h5>
                        </div>
                        <div class="widget-body index-number">
                            <span id="countLoanAmountAll">0</span>
                        </div>
                    </div>
                </div>
                <div class="pricing-span-index">
                    <div class="widget-box ">
                        <div class="widget-header header-color-red3">
                            <h5 class="bigger lighter">累计回款金额：</h5>
                        </div>
                        <div class="widget-body index-number">
                            <span id="countRepayAmountAll">0</span>
                        </div>
                    </div>
                </div>
                <div class="pricing-span-index">
                    <div class="widget-box ">
                        <div class="widget-header header-color-red3">
                            <h5 class="bigger lighter">累计应收金额：</h5>
                        </div>
                        <div class="widget-body index-number">
                            <span id="countShouldRepayAmountAll">0</span>
                        </div>
                    </div>
                </div>
                <!--<div class="pricing-span-index">-->
                    <!--<div class="widget-box ">-->
                        <!--<div class="widget-header header-color-red3">-->
                            <!--<h5 class="bigger lighter">累计应收本金：</h5>-->
                        <!--</div>-->
                        <!--<div class="widget-body index-number">-->
                            <!--<span id="countBorrowMoneyAll">0</span>-->
                        <!--</div>-->
                    <!--</div>-->
                <!--</div>-->
            </div>
        </div>
        <div class="row">
            <div class="index-model">
                <div class="pricing-span-index">
                    <div class="widget-box ">
                        <div class="widget-header header-color-red3">
                            <h5 class="bigger lighter">总逾期金额：</h5>
                        </div>
                        <div class="widget-body index-number">
                            <span id="countOverdueAmountAll">0</span>
                        </div>
                    </div>
                </div>
                <div class="pricing-span-index">
                    <div class="widget-box ">
                        <div class="widget-header header-color-red3">
                            <h5 class="bigger lighter">逾期本金：</h5>
                        </div>
                        <div class="widget-body index-number">
                            <span id="countOverdueBorrowAmountAll">0</span>
                        </div>
                    </div>
                </div>
                <div class="pricing-span-index">
                    <div class="widget-box ">
                        <div class="widget-header header-color-red3">
                            <h5 class="bigger lighter">逾期率：</h5>
                        </div>
                        <div class="widget-body index-number">
                            <span id="countOverdueRate">0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="index-model">
                <div class="pricing-span-index">
                    <div class="widget-box ">
                        <div class="widget-header header-color-red3">
                            <h5 class="bigger lighter">未到期金额：</h5>
                        </div>
                        <div class="widget-body index-number">
                            <span id="countPassTimeAmountAll">0</span>
                        </div>
                    </div>
                </div>
                <div class="pricing-span-index">
                    <div class="widget-box ">
                        <div class="widget-header header-color-red3">
                            <h5 class="bigger lighter">未到期本金：</h5>
                        </div>
                        <div class="widget-body index-number">
                            <span id="countPassTimeBorrowAmountAll">0</span>
                        </div>
                    </div>
                </div>
                <!--<div class="pricing-span-index">-->
                    <!--<div class="widget-box ">-->
                        <!--<div class="widget-header header-color-red3">-->
                            <!--<h5 class="bigger lighter">所有流量费</h5>-->
                        <!--</div>-->
                        <!--<div class="widget-body index-number">-->
                            <!--<span id="countFlowAmount"></span>-->
                        <!--</div>-->
                    <!--</div>-->
                <!--</div>-->
                <!--<div class="pricing-span-index">-->
                    <!--<div class="widget-box ">-->
                        <!--<div class="widget-header header-color-red3">-->
                            <!--<h5 class="bigger lighter">所有风控费</h5>-->
                        <!--</div>-->
                        <!--<div class="widget-body index-number">-->
                            <!--<span id="countRiskAmount"></span>-->
                        <!--</div>-->
                    <!--</div>-->
                <!--</div>-->
            </div>
        </div>

        <div class="page-header">用户明细：</div>
        <div class="row">
            <div class="index-model">
                <div class="pricing-span-index">
                    <div class="widget-box ">
                        <div class="widget-header header-color-red3">
                            <h5 class="bigger lighter">当日申请人数：</h5>
                        </div>
                        <div class="widget-body index-number">
                            <span id="countOrderNumberToDay">0</span>
                        </div>
                    </div>
                </div>
                <div class="pricing-span-index">
                    <div class="widget-box ">
                        <div class="widget-header header-color-red3">
                            <h5 class="bigger lighter">当日老客：</h5>
                        </div>
                        <div class="widget-body index-number">
                            <span id="countOldUserNumberToDay">0</span>
                        </div>
                    </div>
                </div>
                <div class="pricing-span-index">
                    <div class="widget-box ">
                        <div class="widget-header header-color-red3">
                            <h5 class="bigger lighter">当日新客：</h5>
                        </div>
                        <div class="widget-body index-number">
                            <span id="countNewUserNumberToDay">0</span>
                        </div>
                    </div>
                </div>
                <div class="pricing-span-index">
                    <div class="widget-box ">
                        <div class="widget-header header-color-red3">
                            <h5 class="bigger lighter">当日次新：</h5>
                        </div>
                        <div class="widget-body index-number">
                            <span id="countSecondUserNumberToDay">0</span>
                        </div>
                    </div>
                </div>
                <div class="pricing-span-index">
                    <div class="widget-box ">
                        <div class="widget-header header-color-red3">
                            <h5 class="bigger lighter">累计申请次数：</h5>
                        </div>
                        <div class="widget-body index-number">
                            <span id="countAllOrderNumber">0</span>
                        </div>
                    </div>
                </div>
                <div class="pricing-span-index">
                    <div class="widget-box ">
                        <div class="widget-header header-color-red3">
                            <h5 class="bigger lighter">当日注册：</h5>
                        </div>
                        <div class="widget-body index-number">
                            <span id="countRegisterUserNumberToDay">0</span>
                        </div>
                    </div>
                </div>
                <div class="pricing-span-index">
                    <div class="widget-box ">
                        <div class="widget-header header-color-red3">
                            <h5 class="bigger lighter">当日实名：</h5>
                        </div>
                        <div class="widget-body index-number">
                            <span id="countRealNameUserNumberToDay">0</span>
                        </div>
                    </div>
                </div>
                <div class="pricing-span-index">
                    <div class="widget-box ">
                        <div class="widget-header header-color-red3">
                            <h5 class="bigger lighter">通讯录认证：</h5>
                        </div>
                        <div class="widget-body index-number">
                            <span id="countUserDetailsUserNumberToDay">0</span>
                        </div>
                    </div>
                </div>
                <div class="pricing-span-index">
                    <div class="widget-box ">
                        <div class="widget-header header-color-red3">
                            <h5 class="bigger lighter">运营商认证：</h5>
                        </div>
                        <div class="widget-body index-number">
                            <span id="countMobileUserNumberToDay">0</span>
                        </div>
                    </div>
                </div>
                <div class="pricing-span-index">
                    <div class="widget-box ">
                        <div class="widget-header header-color-red3">
                            <h5 class="bigger lighter">绑卡：</h5>
                        </div>
                        <div class="widget-body index-number">
                            <span id="countBindbankUserNumberToDay">0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    $(top.hangge());
    var contextPath = "[[@{/}]]";
    var submitTime = laydate.now(0, 'YYYY-MM-DD');
    $("#searchTime").attr('value', submitTime);

    function getAllMessage() {
        var searchTime = $("#searchTime").val();
        $.ajax({
            url: contextPath + "statistics/main_data_ajax",
            type: "POST",
            dataType: "json",
            data: {"searchTime": searchTime},
            beforeSend: function () {
                maskScreen();
            },
            success: function (data) {
                console.log(data);
                var info = data.data;

                if (data.status == 2000) {
                    $("#countAllOrderNumber").html(info.countAllOrderNumber);
                    $("#countRegisterUserNumberToDay").html(info.countRegisterUserNumberToDay);
                    $("#countRealNameUserNumberToDay").html(info.countRealNameUserNumberToDay);
                    $("#countAlipayUserNumberToDay").html(info.countAlipayUserNumberToDay);
                    $("#countMobileUserNumberToDay").html(info.countMobileUserNumberToDay);
                    $("#countBindbankUserNumberToDay").html(info.countBindbankUserNumberToDay);
                    $("#countUserDetailsUserNumberToDay").html(info.countUserDetailsUserNumberToDay);

                    // $("#countFlowAmount").html(info.countFlowAmount * 32);//流量费
                    // $("#countRiskAmount").html(info.countFlowAmount * 10);//风控费
                    $("#balance").html((info.balance).toFixed(2));
                    $("#merchantBalance").html(-info.merchantBalance.toFixed(2));

                    $("#countNewUserNumberToDay").html(info.countNewUserNumberToDay);
                    $("#countSecondUserNumberToDay").html(info.countSecondUserNumberToDay);
                    $("#countOldUserNumberToDay").html(info.countOldUserNumberToDay);

                    $("#countAllOrderUserNumber").html(info.countAllOrderUserNumber);
                    $("#countOrderNumberToDay").html(info.countOrderNumberToDay);
                    $("#countLoanOrderNumberToDay").html(info.countLoanOrderNumberToDay);
                    $("#countLoanAmountToDay").html(info.countLoanAmountToDay);
                    $("#countShouldRepayAmountToDay").html(info.countShouldRepayAmountToDay);
                    $("#countRepayAmountToDay").html(info.countRepayAmountToDay);
                    $("#countBorrowMoneyToDay").html(info.countBorrowMoneyToDay);

                    $("#countAllSuccessOrderNumber").html(info.countAllSuccessOrderNumber.toFixed(0));
                    $("#countLoanOrderNumberAll").html(info.countLoanOrderNumberAll);
                    $("#countLoanAmountAll").html(info.countLoanAmountAll);
                    $("#countShouldRepayAmountAll").html(info.countShouldRepayAmountAll);
                    $("#countRepayAmountAll").html(info.countRepayAmountAll);
                    $("#countBorrowMoneyAll").html(info.countBorrowMoneyAll);
                    $("#countOverdueAmountAll").html(info.countOverdueAmountAll);
                    $("#countOverdueBorrowAmountAll").html(info.countOverdueBorrowAmountAll);
                    $("#countPassTimeAmountAll").html(info.countPassTimeAmountAll);
                    $("#countPassTimeBorrowAmountAll").html(info.countPassTimeBorrowAmountAll);
                    if(info.countAllSuccessOrderNumber == 0){
                        $("#countOverdueRate").html("0%");
                    }else{
                        $("#countOverdueRate").html((info.countOverdueNumberAll*100.00/info.countAllSuccessOrderNumber*1.00).toFixed(0)+"%");
                    }




                    $("#otherFee").html(info.otherFee * 0.03);
                } else {
                    Dialog.alert(data.message);
                }
            },
            complete: function () {
                unMaskScreen();
            }
        });
    }

    getAllMessage();

    function search() {
        var searchTime = $("#searchTime").val();
        if (new Date(searchTime) > new Date()) {
            $("#searchTime").tips({
                side: 3,
                msg: "不能超过当天时间！",
                bg: "#AE81FF",
                time: 2
            });
            $("#searchTime").focus();
            return false;
        }
        getAllMessage(searchTime);
    }

</script>
</body>
</html>
